<!-- breadcrumb area -->
<div class="rts__section breadcrumb__background">
    <div class="container">
        <div class="row">
            <div
                class="col-lg-12 position-relative d-flex justify-content-md-between justify-content-center align-items-center">
                <div class="breadcrumb__area max-content breadcrumb__padding">
                    <div
                        class="rts__job__card__big bg-transparent p-0 position-relative z-1 flex-wrap justify-content-between d-flex gap-4 align-items-center">
                        <div class="d-flex gap-4 align-items-center flex-md-row flex-column mx-auto mx-md-0">
                            <div class="company__icon rounded-2 bg-white">
                                <img class="" src="{{imgUrl + employer.logo}}" alt="">
                            </div>
                            <div class="job__meta w-100 d-flex text-center text-md-start flex-column gap-2">
                                <div class="">
                                    <h3 class="job__title fw-bold h3 mb-0">{{employer.companyName}}</h3>
                                </div>
                                <div class="d-flex gap-3 justify-content-center justify-content-md-start flex-wrap">
                                    <div class="d-flex gap-2 align-items-center">
                                        {{employer.companyField ? employer.companyField : 'Chưa có thông tin' }}
                                    </div>
                                    <div class="d-flex gap-2 align-items-center">
                                        <i class="fa-light fa-location-dot"></i> {{employer.address ? employer.address :
                                        'Chưa có thông tin' }}
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <!-- Viết đánh giá -->
                                    <ng-container *ngIf="loggedIn; else notLoggedInReview">
                                        <button [routerLink]="['/seeker/review-company/', employerId]"
                                            class="rts__btn apply__btn be-1 fill__btn"
                                            style="padding: 10px 20px; width: 200px;">
                                            Viết đánh giá
                                        </button>
                                    </ng-container>

                                    <ng-template #notLoggedInReview>
                                        <button (click)="alert()" class="rts__btn apply__btn be-1 fill__btn"
                                            style="padding: 10px 20px; width: 200px;">
                                            Viết đánh giá
                                        </button>
                                    </ng-template>


                                    <!-- Nút theo dõi -->
                                    <ng-container *ngIf="loggedIn; else notLoggedInFollow">
                                        <button class="follow-btn rts__btn be-1 fill__btn" (click)="toggleFollow()"
                                            (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()"
                                            [ngClass]="{ 'followed': follow?.status }">

                                            <!-- Đang theo dõi -->
                                            <ng-container *ngIf="follow?.status; else notFollowing">
                                                <ng-container *ngIf="!isHovered; else hoveredUnfollow">
                                                    <svg class="icon" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                            d="M5 13l4 4L19 7" />
                                                    </svg>
                                                    Đang theo dõi
                                                </ng-container>

                                                <ng-template #hoveredUnfollow>
                                                    <svg class="icon" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                            d="M6 18L18 6M6 6l12 12" />
                                                    </svg>
                                                    Hủy theo dõi
                                                </ng-template>
                                            </ng-container>

                                            <!-- Chưa theo dõi -->
                                            <ng-template #notFollowing>
                                                <svg class="icon" style="color: #ed1b2f;" viewBox="0 0 24 24"
                                                    fill="none" stroke="currentColor" stroke-width="2">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        d="M12 4v16m8-8H4" />
                                                </svg>
                                                <span style="color:#ed1b2f">Theo dõi</span>
                                            </ng-template>

                                        </button>
                                    </ng-container>

                                    <!-- Chưa đăng nhập -->
                                    <ng-template #notLoggedInFollow>
                                        <button (click)="alert()" class="follow-btn rts__btn be-1 fill__btn">
                                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                    d="M12 4v16m8-8H4" />
                                            </svg>
                                            Theo dõi
                                        </button>
                                    </ng-template>


                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="breadcrumb__apply max-content">
                        <div class="recommend-box">
                            <!-- Vòng tròn tiến trình -->
                            <div class="progress-circle" [style.background]="getProgressCircleStyle(approvedPercent)">
                                <span class="percent">{{ approvedPercent | number: '1.0-0' }}<span
                                        class="small">%</span></span>
                            </div>
                            <!-- Nhãn bên dưới -->
                            <span class="label">Khuyến khích làm việc tại đây</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<!-- breadcrumb area end -->

<!-- Employer Details -->
<div class="rts__section section__padding">
    <div class="container">
        <div class="row g-30">
            <div class="col-xl-8 col-lg-7">
                <div class="job__overview no-border-bottom mb-30">
                    <h6 class="fw-semibold mb-30">Thông tin chung</h6>
                    <div class="job__overview__content">
                        <ul class="d-grid grid-style company__overview">
                            <li class="d-flex flex-column gap-3 gap-sm-0 align-items-center justify-content-between">
                                <div class="d-flex gap-3">
                                    <span class="icon">
                                        <i class="fa-solid fa-calendar"></i>
                                    </span>
                                    <div>
                                        <span class="left-text">Thành lập</span>
                                        <span class="text">{{ employer.foundedIn ? employer.foundedIn : 'Chưa có thông
                                            tin' }}</span>
                                    </div>
                                </div>
                            </li>
                            <li class="d-flex flex-column gap-3 gap-sm-0 align-items-center justify-content-between">
                                <div class="d-flex gap-3">
                                    <span class="icon">
                                        <i class="fa-light fa-user"></i>
                                    </span>
                                    <div>
                                        <span class="left-text">Số lượng</span>
                                        <span class="text">{{ employer.teamMember ? employer.teamMember + ' nhân viên' :
                                            'Chưa có thông tin' }}</span>
                                    </div>
                                </div>
                            </li>

                            <li class="d-flex flex-column gap-3 gap-sm-0 align-items-center justify-content-between">
                                <div class="d-flex gap-3">
                                    <span class="icon">
                                        <i class="fa-solid fa-money-check-dollar"></i>
                                    </span>
                                    <div>
                                        <span class="left-text">Vốn đầu tư</span>
                                        <span class="text">{{ employer.amount ? employer.amount + ' VND' : 'Chưa có
                                            thông tin' }}</span>
                                    </div>
                                </div>
                            </li>
                            <li class="d-flex flex-column gap-3 gap-sm-0 align-items-center justify-content-between">
                                <div class="d-flex gap-3">
                                    <span class="icon">
                                        <i class="fa-solid fa-location-dot"></i>
                                    </span>
                                    <div>
                                        <span class="left-text">Địa điểm</span>
                                        <span class="text">{{ employer.address ? employer.address : 'Chưa có thông tin'
                                            }}</span>
                                    </div>
                                </div>
                            </li>
                            <li class="d-flex flex-column gap-3 gap-sm-0 align-items-center justify-content-between">
                                <div class="d-flex gap-3">
                                    <span class="icon">
                                        <i class="fa-solid fa-briefcase"></i>
                                    </span>
                                    <div>
                                        <span class="left-text">Lĩnh vực</span>
                                        <span class="text">{{ employer.companyField ? employer.companyField : 'Chưa có
                                            thông tin' }}</span>
                                    </div>
                                </div>
                            </li>
                            <li class="d-flex flex-column gap-3 gap-sm-0 align-items-center justify-content-between">
                                <div class="d-flex gap-3">
                                    <span class="icon">
                                        <i class="fa-solid fa-globe"></i>
                                    </span>
                                    <div>
                                        <span class="left-text">Website Công ty</span>
                                        <span class="text"><a href="{{ employer.companyLink || '#' }}"
                                                style="color: #7D8087">
                                                {{ employer.companyLink ? employer.companyLink : 'Chưa có thông tin' }}
                                            </a></span>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="employer__details">
                    <h6 class="fw-semibold mb-20">Giới thiệu công ty</h6>
                    <p style="font-weight: 400; color: black; line-height: 1.8;">
                        {{ employer.companyProfile ? employer.companyProfile : 'Chưa có thông tin' }}
                    </p>
                    <h6 class="fw-semibold mb-20 mt-30">Tại sao bạn sẽ yêu thích làm việc tại đây?</h6>
                    <p style="font-weight: 400; color: black; line-height: 1.8;">
                        {{employer.description ? employer.description : 'Chưa có thông tin' }}
                    </p>
                </div>

                <div class="employer__review mt-40">
                    <h6 class="fw-semibold mb-20">Đánh giá</h6>
                    <div class="swiper-data swiper dot__style" data-swiper='{
                                 "slidesPerView": 2,
                                 "autoplay": true,
                                 "loop": true,
                                 "pagination": {
                                     "el": ".rts__pagination",
                                     "clickable": true
                                 },
                                 "breakpoints": {
                                     "0": {
                                         "slidesPerView": 1
                                     },
                                     "768": {
                                         "slidesPerView": 1.5
                                     },
                                     "1024": {
                                         "slidesPerView": 1.2    
                                     },
                                     "1200": {
                                         "slidesPerView": 2
                                     }
                                 }
                             }'>
                        <div class="swiper-wrapper">
                            <!-- Kiểm tra nếu có dữ liệu review -->
                            <ng-container *ngIf="reviews && reviews.length > 0; else noData">
                                <ng-container *ngFor="let review of reviews">
                                    <div class="swiper-slide">
                                        <div class="review__card">
                                            <!-- Tiêu đề -->
                                            <h6 class="font-20 mb-2 fw-semibold d-block text-dark"
                                                style=" word-wrap: break-word;">{{ review.reason }}</h6>
                                            <div class="d-flex align-items-center gap-3">
                                                <div class="rating d-flex gap-1">
                                                    <i *ngFor="let star of [1, 2, 3, 4, 5]"
                                                        [ngClass]="star <= review.rating ? 'fa-sharp fa-solid fa-star' : 'fa-sharp fa-regular fa-star'"></i>
                                                    <span class="ms-2">{{ review.rating }} <i
                                                            class="fa-solid fa-star"></i></span>
                                                </div>
                                                <!-- Hiển thị "Khuyến khích" nếu rating >= 3 -->
                                                <span *ngIf="review.rating >= 3"
                                                    class="badge bg-success text-white">Khuyến khích</span>
                                            </div>
                                            <!-- Nội dung review -->
                                            <div class="mt-20">
                                                <p class="fw-medium"><strong
                                                        style="font-weight: bold; color: black;">Điều tôi
                                                        thích:</strong><br>{{ review.goodMessage }}</p>
                                                <p class="fw-medium"><strong style="font-weight: bold; color: black;">Đề
                                                        nghị cải thiện:</strong><br>{{ review.improve }}</p>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>
                            </ng-container>
                            <!-- Nếu không có dữ liệu -->
                            <ng-template #noData>
                                <div class="no-data">

                                    <h6>Chưa có đánh giá nào cho công ty này</h6>
                                </div>
                            </ng-template>
                        </div>
                        <div class="rts__slider__control style__two mt-40 dot__style">
                            <div class="rts__pagination"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 col-xl-4 d-flex flex-column gap-40">
                <div class="recent__post">
                    <h6 class="fw-semibold mb-30">{{jobs.length}} việc làm đang tuyển dụng</h6>
                    <div class="d-flex flex-column gap-30">
                        <!-- Job Listing 1 -->
                        <ng-container *ngIf="jobs && jobs.length > 0; else noJobs">
                            <ng-container *ngFor="let job of jobs">
                                <div class="job__card">
                                    <div class="job__header">
                                        <span class="posted__date">
                                            Đăng {{ getPostedTimeAgo(job.postedAt) }}
                                        </span>

                                        <span class="super__hot">
                                            <i class="fa-solid fa-fire"></i> SUPER HOT
                                        </span>
                                    </div>
                                    <div class="d-flex gap-4 align-items-start">
                                        <div class="company__icon">
                                            <img src="{{imgUrl + job.employerLogo}}">
                                        </div>
                                        <div class="job__meta w-100 d-flex flex-column gap-2">
                                            <a [href]="'/seeker/job-details/' + job.id"
                                                class="job__title h6 fw-semibold mb-0">{{job.title}}</a>
                                            <div class="company__info">
                                                <span class="company__name">{{job.employerName}}</span>
                                                <span class="salary__info">
                                                    <i class="fa-solid fa-money-bill"></i> {{job.salary ? job.salary :
                                                    'Chưa có thông tin' }}
                                                </span>
                                            </div>
                                            <div class="job__details d-flex flex-column gap-1">
                                                <div class="d-flex gap-2 align-items-center">
                                                    <i class="fa-light fa-briefcase"></i> Hình thức làm việc:
                                                    {{job.worktypeName ? job.worktypeName : 'Chưa có thông tin' }}
                                                </div>
                                                <div class="d-flex gap-2 align-items-center">
                                                    <i class="fa-light fa-location-dot"></i> {{job.address ? job.address
                                                    : 'Chưa có thông tin' }}
                                                </div>
                                            </div>
                                            <div class="skills__tags d-flex gap-2 flex-wrap">
                                                <span *ngFor="let skill of splitSkills(job.requiredSkills)"
                                                    class="skill__tag">
                                                    {{ skill }}
                                                </span>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                        </ng-container>
                        <ng-template #noJobs>
                            <h6>Hiện không có tin tuyển dụng.</h6>
                        </ng-template>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- job list one end -->

<!-- app center -->

<div class="rts__section pb-120">
    <div class="container">
        <div class="row">
            <div class="rts__appcenter">
                <div class="rts__appcenter__shape">
                    <img src="assets/img/home-1/app/shape.png" alt="">
                </div>
                <div
                    class="rts__appcenter__content d-flex flex-wrap flex-xl-nowrap align-items-center justify-content-between justify-content-lg-center">
                    <div class="content__left align-items-end d-flex position-relative top-15px">
                        <img src="assets/img/home-1/app/app_screen.png" alt="">
                    </div>
                    <div class="content__right text-white text-center text-xl-start max-630">
                        <h3 class="l--1 mb-4 text-white wow animated fadeInUp" data-wow-delay=".1s ">Download The app
                            Free!</h3>
                        <p class="wow animated fadeInUp" data-wow-delay=".2s">Looking for a new job can be both exciting
                            and daunting. Navigating the job market involves exploring various avenues.</p>
                        <div class="d-flex gap-3 justify-content-center justify-content-xl-start flex-wrap mt-40 wow animated fadeInUp"
                            data-wow-delay=".3s">
                            <div class="link">
                                <a href="https://appstore.com" target="_blank" title="app store">
                                    <img src="assets/img/home-1/app/app-store.svg" alt="">
                                </a>
                            </div>
                            <div class="link">
                                <a href="https://google.com" target="_blank" title="play store">
                                    <img src="assets/img/home-1/app/play-store.svg" alt="">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- app center end -->

<p-toast></p-toast>