 <!-- breadcrumb area -->
 <div class="rts__section breadcrumb__background">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 position-relative d-flex justify-content-between align-items-center">
                <div class="breadcrumb__area max-content breadcrumb__padding z-2">
                    <h1 class="breadcrumb-title h3 mb-3">Việc làm phù hợp</h1>
                    <nav>
                        <ul class="breadcrumb m-0 lh-1">
                          <li class="breadcrumb-item"><a href="/seeker/home">Trang chủ</a></li>
                          <li class="breadcrumb-item active" aria-current="page">Việc làm phù hợp</li>
                        </ul>
                    </nav>                  
                </div>
                <div class="breadcrumb__area__shape d-flex gap-4 justify-content-end align-items-center">
                    <div class="shape__one common">
                        <img src="assets/img/breadcrumb/shape-1.svg" alt="">
                    </div>
                    <div class="shape__two common">
                        <img src="assets/img/breadcrumb/shape-2.svg" alt="">
                    </div>
                    <div class="shape__three common">
                        <img src="assets/img/breadcrumb/shape-3.svg" alt="">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <!-- breadcrumb area end -->

    <!-- job list one -->
     <div class="rts__section section__padding">
        <div class="container">
            <div class="row g-30">
                <div class="col-lg-5 col-xl-4">
                    <div class="job__search__section mb-40">
                        <form [formGroup]="searchForm" (ngSubmit)="searchJobs(0)" class="d-flex flex-column row-30">
                            <div class="search__item">
                                <label for="search" class="mb-3 font-20 fw-medium text-dark text-capitalize">Tiêu đề</label>
                                <div class="position-relative">
                                    <input type="text" id="search" formControlName="title" placeholder="Nhập từ khóa (VD: Java)">
                                    <i class="fa-light fa-magnifying-glass"></i>
                                </div>
                            </div>
                            <!-- job location -->
                            <div class="search__item">
                                <label for="location" class="mb-3 font-20 fw-medium text-dark text-capitalize">Địa điểm</label>
                                <div class="position-relative">
                                    <select id="location" formControlName="locationId" class="form-select">
                                        <option value="" disabled selected>Chọn địa điểm</option>
                                        <ng-container *ngFor="let location of locations">
                                            <option value="{{location.id}}">{{location.name}}</option>
                                        </ng-container>
                                    </select>                          
                                </div>
                            </div>
                            
                            <!-- job category -->
                            <div class="search__item">
                                <label for="cat" class="mb-3 font-20 fw-medium text-dark text-capitalize">Kinh nghiệm</label>
                                <div class="position-relative">
                                    <select class="form-select" formControlName="experienceId">
                                        <option value="" disabled selected>Chọn theo kinh nghiệm</option>
                                        <ng-container *ngFor="let ex of experiences">
                                            <option value="{{ex.id}}">{{ex.name}}</option>
                                        </ng-container>
                                    </select>                         
                                </div>
                            </div>
                            <!-- job post time -->
                            <div class="search__item">
                                <div class="search__item__list">
                                    <label for="location" class="mb-3 font-20 fw-medium text-dark text-capitalize">Hình thức làm việc</label>
                                    <div class="position-relative">
                                        <select class="form-select" formControlName="worktypeId">
                                            <option value="" disabled selected>Chọn hình thức làm việc</option>
                                            <ng-container *ngFor="let type of worktypes">
                                                <option value="{{type.id}}">{{type.name}}</option>
                                            </ng-container>
                                        </select>                          
                                    </div>
                                </div>
                            </div>
                            <div class="search__item">
                                <div class="search__item__list">
                                    <label for="location" class="mb-3 font-20 fw-medium text-dark text-capitalize">Lĩnh vực</label>
                                    <div class="position-relative">
                                        <select class="form-select" formControlName="categoryId">
                                            <option value="" disabled selected>Chọn lĩnh vực</option>
                                            <ng-container *ngFor="let cat of categories">
                                                <option value="{{cat.id}}">{{cat.subcategoryName}}</option>
                                            </ng-container>
                                        </select>                         
                                    </div>
                                </div>
                            </div>
    
                            <button type="submit" class="rts__btn no__fill__btn max-content mx-auto job__search__btn font-sm" aria-label="Search">Tìm kiếm</button>
                        </form>
                    </div>
    
               
                    
                </div>
                <div class="col-lg-7 col-xl-8">
                    <div class="top__query mb-40 d-flex flex-wrap gap-4 gap-xl-0 justify-content-between align-items-center">
                        <span class="text-dark font-20 fw-medium">{{getJobRange()}}</span>
                        <div class="d-flex flex-wrap align-items-center gap-4">
                            <div class="d-flex align-items-center gap-3" id="nav-tab" role="tablist">
                                <button type="button"  class="rts__btn no__fill__btn reload-style nav-link" style="display: inline-block; padding: 10px 14px; border: 1px solid #28a745; border-radius: 4px;" (click)="loadJobs(currentPage)"
                                pTooltip="Làm mới cơ hội việc làm của bạn!" tooltipPosition="top">
                                    <i class="fa-solid fa-redo"></i>
                                </button>
                                <button class="rts__btn no__fill__btn list-style nav-link active" data-bs-toggle="tab" data-bs-target="#list"> <i class="fa-solid fa-list"></i></button>
                                <button class="rts__btn no__fill__btn grid-style nav-link" data-bs-toggle="tab" data-bs-target="#grid"> <i class="fa-solid fa-grid"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane grid__style fade" role="tabpanel" id="grid">
                            <div class="row g-30">
                                <ng-container *ngIf="jobs && jobs.length > 0, else noData">
                                    <ng-container *ngFor="let job of jobs">
                                <div class="col-xl-6 col-md-6 col-lg-12">
                                    <div class="rts__job__card">
                                        <div class="d-flex align-items-center justify-content-between">
                                            <div class="company__icon">
                                                <img src="{{imgBaseUrl + job.employerLogo}}" alt="">
                                            </div>
                                            <div class="featured__option">
                                              
                                            </div>
                                        </div>
                                        <div class="d-flex gap-3 flex-wrap mt-4">
                                            <div class="d-flex gap-1 align-items-center">
                                                <i class="fa-light fa-location-dot"></i> {{job.locationName}}
                                            </div>
                                            <div class="d-flex gap-1 align-items-center">
                                                <i class="fa-solid fa-briefcase"></i> {{job.worktypeName}}
                                            </div>
                                            <div class="d-flex gap-1 align-items-center">
                                                <i class="fa-light fa-clock"></i> {{job.postedExpired | date: 'dd/MM/yyyy'}}
                                            </div>
                                        </div>
                                        <div class="h6 job__title my-3">
                                            <a [href]="'/seeker/job-details/' + job.jobId" class="job__title h6 mb-0">
                                                {{ job.title.length > 35 ? (job.title | slice: 0: 35) + '...' : job.title }}
                                            </a>
                                            <p style="margin-top: 6px;">
                                                <a class="job__company" [href]="'/seeker/company/' + job.employerId" style="color: #424e5c">
                                                    {{ job.employerName.length > 20 ? (job.employerName | slice: 0: 20) + '...' : job.employerName.toUpperCase() }}
                                                </a>
                                            </p>
                                        </div>
                                        <p>{{job.required}}
                                        </p>
                                        <div class="job__tags d-flex flex-wrap gap-2 mt-4">
                                            <a *ngFor="let skill of splitSkills(job.requiredSkills)" class="skill__tag">
                                                {{ skill }}
                                            </a>
                                            <div class="matched-skills">
                                                <h6 style="margin-bottom: 8px;">Kỹ năng khớp:</h6>
                                                <a *ngFor="let matchedSkill of splitSkills(job.matchedSkill)" class="matched__tag" style="background-color: #28a745; color: white; padding: 4px 8px; border-radius: 4px; margin-right: 8px;">
                                                    {{ matchedSkill }}
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                </ng-container>
                                </ng-container>
                                <ng-template #noData>
                                    <div class="no-data">
                                        <img src="assets/img/no-data.jpg" alt="Không có dữ liệu" class="no-data__img">
                                        <h2>Không có việc làm nào</h2>
                                        <p>Hiện chưa có việc làm nào phù hợp với hồ sơ của bạn!</p>
                                    </div>
                                </ng-template>
                                
                            </div>
                        </div>
                        <div class="tab-pane fade show active list__style" role="tabpanel" id="list">
                            <div class="row g-30">
                                <!-- single item -->
                                <ng-container *ngIf="jobs && jobs.length > 0, else noData">
                                    <ng-container *ngFor="let job of jobs">
                                        <div class="col-lg-12">
                                            <div class="rts__job__card__big style__gradient flex-wrap justify-content-between d-flex gap-4 align-items-center">
                                                <div class="d-flex flex-wrap flex-md-nowrap flex-lg-wrap flex-xl-nowrap gap-4 align-items-center">
                                                    <div class="company__icon rounded-2">
                                                        <img src="{{imgBaseUrl + job.employerLogo}}" alt="">
                                                    </div>
                                                    
                                                    
                                                    <div class="job__meta w-100 d-flex flex-column gap-2">
                                                        <div class="d-flex justify-content-between align-items-center gap-3">
                                                            <a [href]="'/seeker/job-details/' + job.jobId" class="job__title h6 mb-0">  
                                                                {{ job.title.length > 35 ? (job.title | slice: 0: 35) + '...' : job.title }}
                                                            </a>
                                                            <!-- Added Label Badge -->
                                                            <!-- <span class="job__label__badge" 
                                                                [ngClass]="{
                                                                    'not-suitable': job.label === 'Not Suitable',
                                                                    'moderately-suitable': job.label === 'Moderately Suitable',
                                                                    'most-suitable': job.label === 'Most Suitable'
                                                                }">
                                                                <i *ngIf="job.label === 'Not Suitable'" class="fa-solid fa-xmark me-1"></i>
                                                                <i *ngIf="job.label === 'Moderately Suitable'" class="fa-solid fa-minus me-1"></i>
                                                                <i *ngIf="job.label === 'Most Suitable'" class="fa-solid fa-check me-1"></i>
                                                                {{ job.label || 'Not Suitable' }}
                                                            </span> -->
                                                        </div>
                                                        <div class="d-flex gap-2 align-items-center" style="color: black;">
                                                            <span>
                                                                <a class="job__company" [href]="'/seeker/company/' + job.employerId" style="color: #424e5c">
                                                                    {{ job.employerName.length > 20 ? (job.employerName | slice: 0: 20) + '...' : job.employerName.toUpperCase() }}
                                                                </a>
                                                            </span>
                                                       </div>
                                                        <div class="d-flex gap-2 align-items-center" style="color: black;">
                                                             {{job.required}}
                                                        </div>
                                                        <div class="d-flex gap-3 gap-md-4 flex-wrap mb-2">
                                                            <div class="d-flex gap-2 align-items-center">
                                                                <i class="fa-light fa-location-dot"></i> {{job.locationName}}
                                                            </div>
                                                            <div class="d-flex gap-2 align-items-center">
                                                                <i class="fa-solid fa-briefcase"></i> {{job.worktypeName}}
                                                            </div>
                                                            <div class="d-flex gap-2 align-items-center">
                                                                <i class="fa-light fa-clock"></i> {{job.postedExpired | date: 'dd/MM/yyyy'}}
                                                            </div>
                                                        </div>
                                                        <div class="job__tags d-flex flex-wrap gap-3">
                                                            <a *ngFor="let skill of splitSkills(job.requiredSkills)" class="skill__tag">
                                                                {{ skill }}
                                                            </a>
                                                            
                                                        </div>
                                                        <div class="matched-skills" *ngIf="job.matchedSkill && job.matchedSkill.length > 0" style="margin-top: 10px;">
                                                            <h6 style="font-size: 16px; font-weight: 600; color: #424e5c; margin-bottom: 6px;">Kỹ năng khớp:</h6>
                                                            <a *ngFor="let matchedSkill of splitSkills(job.matchedSkill)" class="matched__tag" style="display: inline-block; background-color: #28a745; color: white; padding: 6px 12px; border-radius: 16px; font-size: 14px; font-weight: 500; text-transform: capitalize; margin-right: 8px; margin-bottom: 6px; text-decoration: none; transition: background-color 0.3s ease;" (click)="$event.preventDefault()" onmouseover="this.style.backgroundColor='#218838';" onmouseout="this.style.backgroundColor='#28a745';">
                                                                {{ matchedSkill }}
                                                            </a>
                                                        </div>
                                                        <!-- AI Matching Progress Bar -->
                                                        <!-- <div class="ai-matching" style="margin-top: 10px;">
                                                            <h6 style="font-size: 16px; font-weight: 600; color: #424e5c; margin-bottom: 6px;">AI Matching:</h6>
                                                            <div class="progress" style="height: 20px; background-color: #e9ecef; border-radius: 10px;">
                                                                <div class="progress-bar" role="progressbar" [style.width]="(job.accuracy * 100).toFixed(2) + '%'" [attr.aria-valuenow]="(job.accuracy * 100).toFixed(2)" aria-valuemin="0" aria-valuemax="100" style="background-color: #28a745; border-radius: 10px;">
                                                                    {{ (job.accuracy * 100).toFixed(2) }}%
                                                                </div>
                                                            </div>
                                                        </div> -->
                                                    </div>
                                                </div>
                                                <br>  <br>
                                                <div>
                                                    <button *ngIf="job.checkFavorited != true" type="button" class="bookmark__btn" (click)="addFavorite(job.jobId)"> <i class="fa fa-heart"></i></button>
                                                    <button *ngIf="job.checkFavorited" type="button" class="bookmark__btn" (click)="addFavorite(job.jobId)"> <i class="fa fa-heart text-danger"></i></button>
                                                </div>
                                            </div>
                                        </div>
                            </ng-container>
                        </ng-container>
                        <ng-template #noData>
                            <div class="no-data">
                                <img src="assets/img/no-data.jpg" alt="Không có dữ liệu" class="no-data__img">
                                <h2>Không có việc làm nào</h2>
                                <p>Hiện chưa có việc làm nào phù hợp với hồ sơ của bạn!</p>
                            </div>
                        </ng-template>
                            </div>
                        </div>
                    </div>

                    <div class="rts__pagination d-block mx-auto pt-40 max-content">
                        <ul class="d-flex gap-2">
                            <!-- Nút "Previous" -->
                            <li>
                                <a href="javascript:void(0)" (click)="changePage(currentPage - 1)"
                                    [class.inactive]="currentPage === 0">
                                    <i class="fa-thin fa-arrow-left"></i>
                                </a>
                            </li>

                            <!-- Danh sách các trang -->
                            <li *ngFor="let page of getPages()">
                                <a href="javascript:void(0)" (click)="changePage(page)"
                                    [class.active]="page === currentPage">
                                    {{ page + 1 }}
                                </a>
                            </li>

                            <!-- Nút "Next" -->
                            <li>
                                <a href="javascript:void(0)" (click)="changePage(currentPage + 1)"
                                    [class.inactive]="currentPage === totalPages - 1">
                                    <i class="fa-thin fa-arrow-right"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
     </div>
    <!-- job list one end -->

    <!-- app center -->
    
    <div class="rts__section pb-120">
        <div class="container">
            <div class="row">
                <div class="rts__appcenter">
                    <div class="rts__appcenter__shape">
                        <img src="assets/img/home-1/app/shape.png" alt="">
                    </div>
                    <div class="rts__appcenter__content d-flex flex-wrap flex-xl-nowrap align-items-center justify-content-between justify-content-lg-center">
                        <div class="content__left align-items-end d-flex position-relative top-15px">
                            <img src="assets/img/home-1/app/app_screen.png" alt="">
                        </div>
                        <div class="content__right text-white text-center text-xl-start max-630">
                            <h3 class="l--1 mb-4 text-white wow animated fadeInUp" data-wow-delay=".1s ">Download The app Free!</h3>
                            <p class="wow animated fadeInUp" data-wow-delay=".2s">Looking for a new job can be both exciting and daunting. Navigating the job market involves exploring various avenues.</p>
                            <div class="d-flex gap-3 justify-content-center justify-content-xl-start flex-wrap mt-40 wow animated fadeInUp" data-wow-delay=".3s">
                                <div class="link">
                                    <a href="https://appstore.com" target="_blank" title="app store">
                                        <img src="assets/img/home-1/app/app-store.svg" alt="">
                                    </a>
                                </div>
                                <div class="link">
                                    <a href="https://google.com" target="_blank" title="play store">
                                        <img src="assets/img/home-1/app/play-store.svg" alt="">
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
        
    <!-- app center end -->

    

<div class="modal similar__modal fade " id="loginModal">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="max-content similar__form form__padding">
            <div class="d-flex mb-3 align-items-center justify-content-between">
                <h6 class="mb-0">Login To Jobpath</h6>
                <button type="button" data-bs-dismiss="modal" aria-label="Close">
                    <i class="fa-regular fa-xmark text-primary"></i>
                </button>
            </div>
            <div class="d-block has__line text-center"><p>Choose your Account Type</p></div>
            
            <div class="tab__switch flex-wrap flex-sm-nowrap nav-tab mt-30 mb-30">
                <button class="rts__btn nav-link  active"><i class="fa-light fa-user"></i>Candidate</button>
                <button class="rts__btn nav-link"><i class="rt-briefcase"></i> Employer</button>
            </div>
            <div class="tab-content" id="">
                
            </div>
            <form action="candidate-dashboard.html" method="post" class="d-flex flex-column gap-3">
                <div class="form-group">
                    <label for="email" class="fw-medium text-dark mb-3">Your Email</label>
                    <div class="position-relative">
                        <input type="email" name="email" id="email" value="user@test.com" placeholder="Enter your email" required>
                        <i class="fa-light fa-user icon"></i>
                    </div>
                </div>
                <div class="form-group">
                    <label for="password" class="fw-medium text-dark mb-3">Password</label>
                    <div class="position-relative">
                        <input type="password" name="password" value="1234" id="password" placeholder="Enter your password" required>
                        <i class="fa-light fa-lock icon"></i>
                    </div>
                </div>
                <div class="d-flex flex-wrap justify-content-between align-items-center fw-medium">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                            Remember me
                        </label>
                    </div>
                    <a href="job-list-2.html#" class="forgot__password text-para" data-bs-toggle="modal" data-bs-target="#forgotModal" >Forgot Password?</a>
                </div>
                <div class="form-group my-3">
                    <button class="rts__btn w-100 fill__btn">Login</button>
                </div>
            </form>
            <div class="d-block has__line text-center"><p>Or</p></div>
            <div class="d-flex gap-4 flex-wrap justify-content-center mt-20 mb-20">
                <div class="is__social google">
                    <button><img src="assets/img/icon/google-small.svg" alt="">Continue with Google</button>
                </div>
                <div class="is__social facebook">
                    <button><img src="assets/img/icon/facebook-small.svg" alt="">Continue with Facebook</button>
                </div>
            </div>
            <span class="d-block text-center fw-medium">Don`t have an account? <a href="job-list-2.html#" data-bs-target="#signupModal" data-bs-toggle="modal" class="text-primary">Sign Up</a> </span>
        </div>
      </div>
    </div>
</div>

<!-- signup form -->
<div class="modal similar__modal fade " id="signupModal">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="max-content similar__form form__padding">
            <div class="d-flex mb-3 align-items-center justify-content-between">
                <h6 class="mb-0">Create A Free Account</h6>
                <button type="button" data-bs-dismiss="modal" aria-label="Close">
                    <i class="fa-regular fa-xmark text-primary"></i>
                </button>
            </div>
            <div class="d-block has__line text-center"><p>Choose your Account Type</p></div>
            
            <div class="tab__switch flex-wrap flex-sm-nowrap nav-tab mt-30 mb-30">
                <button class="rts__btn nav-link  active"><i class="fa-light fa-user"></i>Candidate</button>
                <button class="rts__btn nav-link"><i class="rt-briefcase"></i> Employer</button>
            </div>
            <form action="job-list-2.html#" class="d-flex flex-column gap-3">
                
                <div class="form-group">
                    <label for="sname" class="fw-medium text-dark mb-3">Your Name</label>
                    <div class="position-relative">
                        <input type="text" name="sname" id="sname" placeholder="Candidate" required>
                        <i class="fa-light fa-user icon"></i>
                    </div>
                </div>

                <div class="form-group">
                    <label for="signemail" class="fw-medium text-dark mb-3">Your Email</label>
                    <div class="position-relative">
                        <input type="email" name="signemail" id="signemail" placeholder="Enter your email" required>
                        <i class="fa-sharp fa-light fa-envelope icon"></i>
                    </div>
                </div>
                <div class="form-group">
                    <label for="spassword" class="fw-medium text-dark mb-3">Password</label>
                    <div class="position-relative">
                        <input type="password" name="spassword" id="spassword" placeholder="Enter your password" required>
                        <i class="fa-light fa-lock icon"></i>
                    </div>
                </div>
                
                <div class="form-group my-3">
                    <button class="rts__btn w-100 fill__btn">Login</button>
                </div>
            </form>
            <div class="d-block has__line text-center"><p>Or</p></div>
            <div class="d-flex flex-wrap justify-content-center gap-4 mt-20 mb-20">
                <div class="is__social google">
                    <button><img src="assets/img/icon/google-small.svg" alt="">Continue with Google</button>
                </div>
                <div class="is__social facebook">
                    <button><img src="assets/img/icon/facebook-small.svg" alt="">Continue with Facebook</button>
                </div>
            </div>
            <span class="d-block text-center fw-medium">Have an account? <a href="job-list-2.html#" data-bs-target="#loginModal" data-bs-toggle="modal" class="text-primary">Login</a> </span>
        </div>
      </div>
    </div>
</div>

<!-- forgot password form -->
<div class="modal similar__modal fade " id="forgotModal">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="max-content similar__form form__padding">
            <div class="d-flex mb-3 align-items-center justify-content-between">
                <h6 class="mb-0">Forgot Password</h6>
                <button type="button" data-bs-dismiss="modal" aria-label="Close">
                    <i class="fa-regular fa-xmark text-primary"></i>
                </button>
            </div>
            <form action="job-list-2.html#" class="d-flex flex-column gap-3">
                
                <div class="form-group">
                    <label for="fmail" class="fw-medium text-dark mb-3">Your Email</label>
                    <div class="position-relative">
                        <input type="email" name="email" id="fmail" placeholder="Enter your email" required>
                        <i class="fa-sharp fa-light fa-envelope icon"></i>
                    </div>
                </div>
                
                <div class="form-group my-3">
                    <button class="rts__btn w-100 fill__btn">Reset Password</button>
                </div>
            </form>
        
            <span class="d-block text-center fw-medium">Remember Your Password? <a href="job-list-2.html#" data-bs-target="#loginModal" data-bs-toggle="modal" class="text-primary">Login</a> </span>
        </div>
      </div>
    </div>
</div>

<p-toast></p-toast>